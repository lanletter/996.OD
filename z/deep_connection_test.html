<!DOCTYPE html>
<html>
<body>
<meta charset="UTF-8">
<h1>Test Scheme</h1>
<!--自动加载隐藏页面跳转-->
<iframe src=" " style="display:none"></iframe>
<!--手动点击跳转-->
<a id="deeplink" href="">打开</a>
<a id="deeplink_android_native" href="">打开Android native</a>
<a id="deeplink_android_web" href="">打开Android web</a>
<a id="deeplink_ios_native" href="">打开IOS native</a>
<a id="deeplink_ios_web" href="">打开IOS web</a>


<h1 id="rs"></h1>

<P>
    <!--@property (nonatomic,strong) NSString *urlString;//详情页URL-->
    <!--@property (nonatomic,strong) NSString *imageURL;//分享用的图片-->
    <!--@property (nonatomic,strong) NSString *shareTitle;//分享用的标题-->
    <!--@property (nonatomic,strong) NSString *shareSubTitle;//分享用的副标题-->
    <!--@property (nonatomic,strong) NSString *refid;//当前文章ID-->
    <!--@property (nonatomic,strong) NSString *VCType;//当前进入的那个类型的网页-->
</P>

</body>
</html>
<script src="../js/jquery.min.js"></script>
<script type="text/javascript">
    /*判断是IOS还是Android机型*/
    var u = navigator.userAgent;
    var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端
    var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
    console.log('是否是Android：' + isAndroid);
    console.log('是否是iOS：' + isiOS);

    /*判断是否微信浏览器内打开*/
    function isWeiXin() {
        var ua = window.navigator.userAgent.toLowerCase();
        console.log(ua);//mozilla/5.0 (iphone; cpu iphone os 9_1 like mac os x) applewebkit/601.1.46 (khtml, like gecko)version/9.0 mobile/13b143 safari/601.1
        if (ua.match(/MicroMessenger/i) == 'micromessenger') {
            return true;
        } else {
            return false;
        }
    }
    if(isWeiXin()){
        document.getElementById("rs").innerHTML="微信浏览器";
        console.log(" 是来自微信内置浏览器")
    }else{
        document.getElementById("rs").innerHTML="不是微信浏览器";
        console.log("不是来自微信内置浏览器")
    }


    /*此页面在APP中是native还是H5*/
    var deeplink_ios_web = "https://api.fotilestyle.com/ft/path/web/";
    var deeplink_ios_native = "https://api.fotilestyle.com/ft/native/";
    var deeplink_android_web = "fotile://api.fotilestyle.com/web-menue/";
    var deeplink_android_native = "https://api.fotilestyle.com/ft/native/";

    /*获取页面参数*/
    var refid = "100";
    var urlString = "http://h5.fotilestyle.com/fotilestyle-test/html/menu-inpage.html?id=100";
    var imageURL = "https://fotile-iotcloud-test.oss-cn-hangzhou.aliyuncs.com/avatars/4796a1d4-0c0a-4ada-9fc6-502567e7adb9.jpg";
    var shareTitle = "剁椒芋艿";
    var shareSubTitle = "剁椒芋艿2";


    /*链接+传参*/
    if(isiOS==true){
        var deeplink_ios_web_url = deeplink_ios_web + "?refid=" + encodeURIComponent(refid) + "&urlString=" + encodeURIComponent(urlString) + "&imageURL" + encodeURIComponent(imageURL) + "&shareTitle" + encodeURIComponent(shareTitle) +"&shareSubTitle" + encodeURIComponent(shareSubTitle) ;
        var deeplink_ios_native_url = deeplink_ios_native + "?refid=" + encodeURIComponent(refid) + "&urlString=" + encodeURIComponent(urlString) + "&imageURL" + encodeURIComponent(imageURL) + "&shareTitle" + encodeURIComponent(shareTitle) +"&shareSubTitle" + encodeURIComponent(shareSubTitle) ;
        $("#deeplink_ios_native").attr('href',deeplink_ios_native_url);
        $("#deeplink_ios_web").attr('href',deeplink_ios_web_url);
    }
    if(isAndroid==true){
        var deeplink_android_web_url = deeplink_android_web + "?refid=" + encodeURIComponent(refid) + "&urlString=" + encodeURIComponent(urlString) + "&imageURL" + encodeURIComponent(imageURL) + "&shareTitle" + encodeURIComponent(shareTitle) +"&shareSubTitle" + encodeURIComponent(shareSubTitle) ;
        var deeplink_android_native_url = deeplink_android_native + "?refid=" + encodeURIComponent(refid) + "&urlString=" + encodeURIComponent(urlString) + "&imageURL" + encodeURIComponent(imageURL) + "&shareTitle" + encodeURIComponent(shareTitle) +"&shareSubTitle" + encodeURIComponent(shareSubTitle) ;
        $("#deeplink_android_native").attr('href',deeplink_android_native_url);
        $("#deeplink_android_web").attr('href',deeplink_android_web_url);
    }
</script>
