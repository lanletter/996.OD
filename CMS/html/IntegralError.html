<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ç§¯åˆ†å¼‚å¸¸æŸ¥è¯¢</title>
    <link rel="stylesheet" href="../layui/css/layui.css">
    <link rel="stylesheet" href="../css/Product.css">
    <link rel="stylesheet" href="../css/common.css">
</head>
<body style="background-color: #fff;">
<header class="layui-clear">
    <div id="reorder" class="f-l">
        <div>
            <i class="f-l" style="line-height: 32px;">æ¯æ—¥è·å–ä¸Šé™ï¼š</i>
            <div id="search" class="f-l">
                <input type="text" value="200" onkeydown="EnterPress()">
                <i id="searchMenu">ğŸ”</i>
            </div>
        </div>
    </div>
</header>

<table class="layui-hide" id="demo"></table>

<script src="../layui/layui.js"></script>
<script src="../js/jquery.js"></script>
<script src="../js/urlport.js"></script>
<script>


    var getSum=$("#search input").val();
    ajaxfunction(getSum);//è°ƒç”¨ajax

    /**ç‚¹å‡»æœç´¢äº‹ä»¶**/
    $("#searchMenu").on().click(function () {
        getSum=$("#search input").val();
        $("tbody").remove();
        ajaxfunction(getSum);//è°ƒç”¨ajax
    });

    /**å›è½¦é”®è§¦å‘ç‚¹å‡»æœç´¢**/
    function EnterPress(){
        if(event.keyCode == 13){
            $("#searchMenu").trigger("click");
        }
    }

    function ajaxfunction(getSum) {
        console.log(getSum);
        $.ajax({
            url: urlport + 'integral/getAbnormalList',
            dataType: "json",
            type: "post",
            data: JSON.stringify({
                "getSum": getSum,
                "days": 30,
                "pageNum":"",
                "pageSize":""
            }),
            contentType: 'application/json;charset=UTF-8',
            success: function (data) {
                console.log(data);
                var userList = data.data;
                console.log(userList);
                layui.use('table', function(){
                    var table = layui.table;

                    //å±•ç¤ºå·²çŸ¥æ•°æ®
                    table.render({
                        elem: '#demo'
                        ,cols: [[ //æ ‡é¢˜æ 
                            {field: 'LAY_TABLE_INDEX', title: 'åºå·', width:80, sort: true}
                            ,{field: 'userId', title: 'ç”¨æˆ·ID', width:180, sort: true}
                            ,{field: 'nickName', title: 'æ˜µç§°', width:180}
                            ,{field: 'getSum', title: 'å½“æ—¥è·å–ç§¯åˆ†', width:180, sort: true}
                            ,{field: 'date', title: 'æ—¥æœŸ', width: 180, sort: true}
                            ,{field: 'accountName', title: 'æ‰‹æœºå·', width: 180, sort: true}
                        ]]
                        ,data: userList
                        ,even: true
                        ,page: true //æ˜¯å¦æ˜¾ç¤ºåˆ†é¡µ
                        ,limit: 10 //æ¯é¡µé»˜è®¤æ˜¾ç¤ºçš„æ•°é‡
                    });
                });
            },
            error: function () {
                $("table").append("æ•°æ®è¯·æ±‚å¤±è´¥");
            }
        })

    }

</script>
</body>
</html>